!function(t,i){function e(t){return"number"==typeof t}function n(t){return null!=t}var a,s,r=t.Chart,o=t.extend,h=t.each;s=["path","rect","circle"],a={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var l=i.inArray,p=t.merge,c=function(){this.init.apply(this,arguments)};c.prototype={init:function(t,i){var e,n,a=i.shape&&i.shape.type;this.chart=t,n={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},(e={circle:{params:{x:0,y:0}}})[a]&&(n.shape=p(n.shape,e[a])),this.options=p({},n,i)},render:function(t){var i=this.chart,e=this.chart.renderer,n=this.group,a=this.title,r=this.shape,o=this.options,h=o.title,p=o.shape;n||(n=this.group=e.g()),!r&&p&&-1!==l(p.type,s)&&(r=this.shape=e[o.shape.type](p.params)).add(n),!a&&h&&(a=this.title=e.label(h)).add(n),n.add(i.annotations.group),this.linkObjects(),!1!==t&&this.redraw()},redraw:function(){var i,s,r,h,p=this.options,c=this.chart,d=this.group,u=this.title,y=this.shape,f=this.linkedObject,x=c.xAxis[p.xAxis],g=c.yAxis[p.yAxis],b=p.width,m=p.height,v=a[p.anchorY],w=a[p.anchorX];if(f&&("point"===(i=f instanceof t.Point?"point":f instanceof t.Series?"series":null)?(p.xValue=f.x,p.yValue=f.y,s=f.series):"series"===i&&(s=f),d.visibility!==s.group.visibility&&d.attr({visibility:s.group.visibility})),f=n(p.xValue)?x.toPixels(p.xValue+x.minPointOffset)-x.minPixelPadding:p.x,i=n(p.yValue)?g.toPixels(p.yValue):p.y,!isNaN(f)&&!isNaN(i)&&e(f)&&e(i)){if(u&&(u.attr(p.title),u.css(p.title.style)),y){if(u=o({},p.shape.params),"values"===p.units){for(r in u)l(r,["width","x"])>-1?u[r]=x.translate(u[r]):l(r,["height","y"])>-1&&(u[r]=g.translate(u[r]));if(u.width&&(u.width-=x.toPixels(0)-x.left),u.x&&(u.x+=x.minPixelPadding),"path"===p.shape.type){s=f;for(var j=i,k=(r=u.d).length,O=0;O<k;)"number"==typeof r[O]&&"number"==typeof r[O+1]?(r[O]=x.toPixels(r[O])-s,r[O+1]=g.toPixels(r[O+1])-j,O+=2):O+=1}}"circle"===p.shape.type&&(u.x+=u.r,u.y+=u.r),y.attr(u)}d.bBox=null,e(b)||(b=(h=d.getBBox()).width),e(m)||(h||(h=d.getBBox()),m=h.height),e(w)||(w=a.center),e(v)||(v=a.center),f-=b*w,i-=m*v,c.animation&&n(d.translateX)&&n(d.translateY)?d.animate({translateX:f,translateY:i}):d.translate(f,i)}},destroy:function(){var t=this,i=this.chart.annotations.allItems,e=i.indexOf(t);e>-1&&i.splice(e,1),h(["title","shape","group"],(function(i){t[i]&&(t[i].destroy(),t[i]=null)})),t.group=t.title=t.shape=t.chart=t.options=null},update:function(t,i){o(this.options,t),this.linkObjects(),this.render(i)},linkObjects:function(){var t=this.chart,i=this.linkedObject,e=i&&(i.id||i.options.id),a=this.options.linkedTo;n(a)?n(i)&&a===e||(this.linkedObject=t.get(a)):this.linkedObject=null}},o(r.prototype,{annotations:{add:function(t,i){var e,n,a=this.allItems,s=this.chart;for("[object Array]"===Object.prototype.toString.call(t)||(t=[t]),n=t.length;n--;)e=new c(s,t[n]),a.push(e),e.render(i)},redraw:function(){h(this.allItems,(function(t){t.redraw()}))}}}),r.prototype.callbacks.push((function(i){var e,n=i.options.annotations;(e=i.renderer.g("annotations")).attr({zIndex:7}),e.add(),i.annotations.allItems=[],i.annotations.chart=i,i.annotations.group=e,"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&i.annotations.add(i.options.annotations),t.addEvent(i,"redraw",(function(){i.annotations.redraw()}))}))}(Highcharts,HighchartsAdapter);