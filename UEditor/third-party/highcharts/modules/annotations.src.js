!function(t,i){var e,n,a=t.Chart,r=t.extend,s=t.each;n=["path","rect","circle"],e={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var o=i.inArray,l=t.merge;function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"number"==typeof t}function c(t){return null!=t}var d=function(){this.init.apply(this,arguments)};d.prototype={init:function(t,i){var e=i.shape&&i.shape.type;this.chart=t,this.options=l({},function(t){var i,e;return e={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},(i={circle:{params:{x:0,y:0}}})[t]&&(e.shape=l(e.shape,i[t])),e}(e),i)},render:function(t){var i=this,e=this.chart,a=i.chart.renderer,r=i.group,s=i.title,l=i.shape,h=i.options,p=h.title,c=h.shape;r||(r=i.group=a.g()),!l&&c&&-1!==o(c.type,n)&&(l=i.shape=a[h.shape.type](c.params)).add(r),!s&&p&&(s=i.title=a.label(p)).add(r),r.add(e.annotations.group),i.linkObjects(),!1!==t&&i.redraw()},redraw:function(){var i,n,a,s,l,h,d,u=this.options,f=this.chart,y=this.group,x=this.title,g=this.shape,b=this.linkedObject,m=f.xAxis[u.xAxis],v=f.yAxis[u.yAxis],w=u.width,k=u.height,P=e[u.anchorY],O=e[u.anchorX];if(b&&("point"===(n=b instanceof t.Point?"point":b instanceof t.Series?"series":null)?(u.xValue=b.x,u.yValue=b.y,a=b.series):"series"===n&&(a=b),y.visibility!==a.group.visibility&&y.attr({visibility:a.group.visibility})),h=c(u.xValue)?m.toPixels(u.xValue+m.minPointOffset)-m.minPixelPadding:u.x,d=c(u.yValue)?v.toPixels(u.yValue):u.y,!isNaN(h)&&!isNaN(d)&&p(h)&&p(d)){if(x&&(x.attr(u.title),x.css(u.title.style)),g){if(i=r({},u.shape.params),"values"===u.units){for(s in i)o(s,["width","x"])>-1?i[s]=m.translate(i[s]):o(s,["height","y"])>-1&&(i[s]=v.translate(i[s]));i.width&&(i.width-=m.toPixels(0)-m.left),i.x&&(i.x+=m.minPixelPadding),"path"===u.shape.type&&function(t,i,e,n,a){for(var r=t.length,s=0;s<r;)"number"==typeof t[s]&&"number"==typeof t[s+1]?(t[s]=i.toPixels(t[s])-n,t[s+1]=e.toPixels(t[s+1])-a,s+=2):s+=1}(i.d,m,v,h,d)}"circle"===u.shape.type&&(i.x+=i.r,i.y+=i.r),g.attr(i)}y.bBox=null,p(w)||(w=(l=y.getBBox()).width),p(k)||(l||(l=y.getBBox()),k=l.height),p(O)||(O=e.center),p(P)||(P=e.center),h-=w*O,d-=k*P,f.animation&&c(y.translateX)&&c(y.translateY)?y.animate({translateX:h,translateY:d}):y.translate(h,d)}},destroy:function(){var t=this,i=this.chart.annotations.allItems,e=i.indexOf(t);e>-1&&i.splice(e,1),s(["title","shape","group"],(function(i){t[i]&&(t[i].destroy(),t[i]=null)})),t.group=t.title=t.shape=t.chart=t.options=null},update:function(t,i){r(this.options,t),this.linkObjects(),this.render(i)},linkObjects:function(){var t=this,i=t.chart,e=t.linkedObject,n=e&&(e.id||e.options.id),a=t.options.linkedTo;c(a)?c(e)&&a===n||(t.linkedObject=i.get(a)):t.linkedObject=null}},r(a.prototype,{annotations:{add:function(t,i){var e,n,a=this.allItems,r=this.chart;for(h(t)||(t=[t]),n=t.length;n--;)e=new d(r,t[n]),a.push(e),e.render(i)},redraw:function(){s(this.allItems,(function(t){t.redraw()}))}}}),a.prototype.callbacks.push((function(i){var e,n=i.options.annotations;(e=i.renderer.g("annotations")).attr({zIndex:7}),e.add(),i.annotations.allItems=[],i.annotations.chart=i,i.annotations.group=e,h(n)&&n.length>0&&i.annotations.add(i.options.annotations),t.addEvent(i,"redraw",(function(){i.annotations.redraw()}))}))}(Highcharts,HighchartsAdapter);